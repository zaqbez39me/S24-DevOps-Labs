# Lab 11: Kubernetes Secrets and Hashicorp Vault

## Task 1

### Step 2

* To confirm secret, let us use following command
```bash
kubectl get secret credentials -o jsonpath='{.data}
```
The output
```bash
{"password":"emFxMTIz"}
```

* To decode, let us use following command
```bash
kubectl get secret credentials -o jsonpath='{.data.password}' | base64 --decode
```
The output
```bash
zaq123
```

### Step 3

To get pods, let us use following command
```bash
kubectl get pods
```
Output
```bash
NAME                                   READY   STATUS    RESTARTS       AGE
helm-hooks-time-app-586fbdfcb7-mldq8   1/1     Running   3 (110m ago)   7d6h
time-app-9849b7685-rk6m2               1/1     Running   0              3m13s
```

To get the secret, let us use following command
```bash
kubectl exec time-app-9849b7685-rk6m2 -- printenv | grep MY_PASSWORD
```
Output
```bash
MY_PASSWORD=zaq123
```

## Task 2

### Step 3

Outputs:

```bash
/code $ cat /vault/secrets/database-config.txt
data: map[password:db-secret-password username:db-readonly-username]                                                    
metadata: map[created_time:2024-04-16T23:09:41.63173198Z custom_metadata:<nil> deletion_time: destroyed:false version:1]
/code $ df -h
Filesystem                Size      Used Available Use% Mounted on                               
overlay                1006.9G      7.4G    948.2G   1% /                                        
tmpfs                    64.0M         0     64.0M   0% /dev                                     
tmpfs                     3.9G         0      3.9G   0% /sys/fs/cgroup                           
tmpfs                     7.7G      4.0K      7.7G   0% /vault/secrets                           
/dev/sde               1006.9G      7.4G    948.2G   1% /dev/termination-log                     
/dev/sde               1006.9G      7.4G    948.2G   1% /etc/resolv.conf                         
/dev/sde               1006.9G      7.4G    948.2G   1% /etc/hostname                            
/dev/sde               1006.9G      7.4G    948.2G   1% /etc/hosts                               
shm                      64.0M         0     64.0M   0% /dev/shm                                 
tmpfs                     7.7G     12.0K      7.7G   0% /run/secrets/kubernetes.io/serviceaccount
tmpfs                     3.9G         0      3.9G   0% /proc/acpi                               
tmpfs                    64.0M         0     64.0M   0% /proc/kcore                              
tmpfs                    64.0M         0     64.0M   0% /proc/keys                               
tmpfs                    64.0M         0     64.0M   0% /proc/timer_list                         
tmpfs                     3.9G         0      3.9G   0% /sys/firmware
```

